<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Perform APES model selection — apes • APES</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Perform APES model selection — apes" />
<meta property="og:description" content="Approximated exhaustive selection will be performed on the input GLM model." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">APES</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/APES.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/birthweight.html">APES: birth weight data example</a>
    </li>
    <li>
      <a href="../articles/diabetes.html">APES: diabetes data example</a>
    </li>
    <li>
      <a href="../articles/install_bestsubset.html">Install `bestsubset`</a>
    </li>
    <li>
      <a href="../articles/speed.html">Speeding up APES</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kevinwang09/APES/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform APES model selection</h1>
    <small class="dont-index">Source: <a href='https://github.com/kevinwang09/APES/blob/master/R/APES.R'><code>R/APES.R</code></a></small>
    <div class="hidden name"><code>APES.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Approximated exhaustive selection will be performed on the input GLM model.</p>
    </div>

    <pre class="usage"><span class='fu'>apes</span><span class='op'>(</span>
  <span class='va'>model</span>,
  k <span class='op'>=</span> <span class='cn'>NULL</span>,
  estimator <span class='op'>=</span> <span class='st'>"leaps"</span>,
  time_limit <span class='op'>=</span> <span class='fl'>10L</span>,
  really_big <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  n_boot <span class='op'>=</span> <span class='fl'>0</span>,
  workers <span class='op'>=</span> <span class='fl'>1L</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A "full" model with all variables of interest fitted to it.
Accepts either a "glm" class or "coxph" class object.</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>Model size to explore. Default to NULL, which searches through all variables in the model.
Alternatively, user can input a vector. If estimator is:</p><ul>
<li><p>"leaps", then models up to size max(k) wil be explored.</p></li>
<li><p>"mio", then models with specified values will be explored.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>estimator</th>
      <td><p>Either "leaps" (default) or "mio", which correspond to
optimisation algorithms available in
the leaps and bestsubset package, respectively.</p></td>
    </tr>
    <tr>
      <th>time_limit</th>
      <td><p>The time limit for the maximum time allocated to each
model size model when the "mio" estimator was selected. It will not affect the computational speed if "leaps" is selected as the estimator.</p></td>
    </tr>
    <tr>
      <th>really_big</th>
      <td><p>If set to FALSE (by default), then it will prevent variable selection greater than 30 variables.
We recommend only setting this argument to TRUE if the number of variables exceed 30 while simultaneous setting the
"estimator" argument to "mio".</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Whether to print off messages during computations.</p></td>
    </tr>
    <tr>
      <th>n_boot</th>
      <td><p>Number of bootstrap runs, default to 0, which doesn't perform any sampling.</p></td>
    </tr>
    <tr>
      <th>workers</th>
      <td><p>Number of cores used for parallel processing for the bootstrap</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Either an object of class "apes" in case "n_boot" is set to zero or
an object of class "boot_apes" in case "n_boot" is set to a positive integer.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is the main function of the APES package. Note that the feature dimensions
equals to the number of columns if all columns are numeric.
If factor/categorical variables are present in the input "glm" object,
then the feature dimension also includes all the levels of factors. See vignette on birth weight.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='va'>n</span> <span class='op'>=</span> <span class='fl'>100</span>
<span class='va'>p</span> <span class='op'>=</span> <span class='fl'>10</span>
<span class='va'>beta</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>p</span><span class='op'>-</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>x</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>n</span><span class='op'>*</span><span class='va'>p</span><span class='op'>)</span>, ncol <span class='op'>=</span> <span class='va'>p</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"X"</span>, <span class='fl'>1</span><span class='op'>:</span><span class='va'>p</span><span class='op'>)</span>

<span class='co'>## Logistic regression example</span>
<span class='va'>y</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>n</span>, size <span class='op'>=</span> <span class='fl'>1</span>, prob <span class='op'>=</span> <span class='fu'><a href='logit.html'>expit</a></span><span class='op'>(</span><span class='va'>x</span> <span class='op'>%*%</span> <span class='va'>beta</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>x</span><span class='op'>)</span>
<span class='va'>model</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span><span class='op'>(</span><span class='va'>y</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>data</span>, family <span class='op'>=</span> <span class='st'>"binomial"</span><span class='op'>)</span>
<span class='va'>apes_result</span> <span class='op'>=</span> <span class='fu'>apes</span><span class='op'>(</span>model <span class='op'>=</span> <span class='va'>model</span><span class='op'>)</span>
<span class='va'>apes_result</span>
</div><div class='output co'>#&gt; Time taken:  0.0006356676  minutes 
#&gt; 
#&gt;  APES - AIC selected the following variables 
#&gt; intercept        X1        X2        X3        X4        X5        X6        X7 
#&gt;    -0.041     0.912    -1.145     0.000     0.000     0.000    -0.392     0.000 
#&gt;        X8        X9       X10 
#&gt;     0.000     0.000     0.000 
#&gt; 
#&gt;  APES - BIC selected the following variables 
#&gt; intercept        X1        X2        X3        X4        X5        X6        X7 
#&gt;    -0.054     0.910    -1.123     0.000     0.000     0.000     0.000     0.000 
#&gt;        X8        X9       X10 
#&gt;     0.000     0.000     0.000 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>apes_result</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "apes"</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>apes_result</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "apes_model_df"        "apes_mle_beta"        "apes_mle_beta_binary"
#&gt; [4] "time_used"            "selected_model_beta"  "model_avg_beta"      
#&gt; [7] "response_tibble"     </div><div class='input'>
<span class='co'>## Poisson regression example</span>
<span class='va'>y</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>n</span>, lambda <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span><span class='op'>(</span><span class='va'>x</span> <span class='op'>%*%</span> <span class='va'>beta</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>data</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>x</span><span class='op'>)</span>
<span class='va'>model</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span><span class='op'>(</span><span class='va'>y</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>data</span>, family <span class='op'>=</span> <span class='st'>"poisson"</span><span class='op'>)</span>
<span class='fu'>apes</span><span class='op'>(</span>model <span class='op'>=</span> <span class='va'>model</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Time taken:  8.066495e-06  minutes 
#&gt; 
#&gt;  APES - AIC selected the following variables 
#&gt; intercept        X1        X2        X3        X4        X5        X6        X7 
#&gt;    -0.216     0.935    -1.133     0.000     0.009     0.000     0.022     0.000 
#&gt;        X8        X9       X10 
#&gt;    -0.054     0.000     0.000 
#&gt; 
#&gt;  APES - BIC selected the following variables 
#&gt; intercept        X1        X2        X3        X4        X5        X6        X7 
#&gt;    -0.216     0.935    -1.133     0.000     0.009     0.000     0.022     0.000 
#&gt;        X8        X9       X10 
#&gt;    -0.054     0.000     0.000 </div><div class='input'>
<span class='co'>## Bootstrap examples</span>
<span class='fu'>apes</span><span class='op'>(</span>model <span class='op'>=</span> <span class='va'>model</span>, n_boot <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Time taken:  0.003102752  minutes 
#&gt; Total number of bootstrap APES results:  2</div><div class='input'><span class='fu'>apes</span><span class='op'>(</span>model <span class='op'>=</span> <span class='va'>model</span>, n_boot <span class='op'>=</span> <span class='fl'>2</span>, workers <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Time taken:  0.003590167  minutes 
#&gt; Total number of bootstrap APES results:  2</div><div class='input'><span class='co'>## apes(model = model, n_boot = 2, workers = 2)</span>

<span class='co'>## Cox regression example</span>
<span class='va'>hx</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span><span class='op'>(</span><span class='va'>x</span> <span class='op'>%*%</span> <span class='va'>beta</span><span class='op'>)</span>
<span class='va'>time</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Exponential.html'>rexp</a></span><span class='op'>(</span><span class='va'>n</span>, <span class='va'>hx</span><span class='op'>)</span>
<span class='va'>censor</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='va'>n</span>, prob <span class='op'>=</span> <span class='fl'>0.3</span>, size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='co'># censoring indicator</span>
<span class='va'>data</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>x</span>, time <span class='op'>=</span> <span class='va'>time</span>, censor <span class='op'>=</span> <span class='va'>censor</span><span class='op'>)</span>
<span class='va'>model</span> <span class='op'>=</span> <span class='fu'>survival</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/coxph.html'>coxph</a></span><span class='op'>(</span><span class='fu'>survival</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span><span class='op'>(</span><span class='va'>time</span>, <span class='va'>censor</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>data</span><span class='op'>)</span>
<span class='fu'>apes</span><span class='op'>(</span>model <span class='op'>=</span> <span class='va'>model</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Time taken:  6.850561e-06  minutes 
#&gt; 
#&gt;  APES - AIC selected the following variables 
#&gt; intercept        X1        X2        X3        X4        X5        X6        X7 
#&gt;     0.000     0.874    -1.172     0.000     0.387     0.000     0.000     0.000 
#&gt;        X8        X9       X10 
#&gt;     0.000    -0.395     0.000 
#&gt; 
#&gt;  APES - BIC selected the following variables 
#&gt; intercept        X1        X2        X3        X4        X5        X6        X7 
#&gt;     0.000     0.777    -1.082     0.000     0.000     0.000     0.000     0.000 
#&gt;        X8        X9       X10 
#&gt;     0.000     0.000     0.000 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kevin Wang, Garth Tarr, Jean Yang, Samuel Mueller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


